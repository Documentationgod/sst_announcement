"use strict";(()=>{var e={};e.id=73,e.ids=[73],e.modules={10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},11737:e=>{e.exports=import("drizzle-orm")},1214:e=>{e.exports=import("drizzle-orm/node-postgres")},58025:e=>{e.exports=import("drizzle-orm/pg-core")},64939:e=>{e.exports=import("pg")},77598:e=>{e.exports=require("node:crypto")},78959:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.r(r),t.d(r,{patchFetch:()=>u,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>l});var a=t(42706),n=t(28203),s=t(45994),i=t(97007),p=e([i]);i=(p.then?(await p)():p)[0];let d=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/profile/route",pathname:"/api/profile",filename:"route",bundlePath:"app/api/profile/route"},resolvedPagePath:"E:\\Project\\sst_announcement\\app\\api\\profile\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:c,workUnitAsyncStorage:l,serverHooks:m}=d;function u(){return(0,s.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:l})}o()}catch(e){o(e)}})},97007:(e,r,t)=>{t.a(e,async(e,o)=>{try{t.r(r),t.d(r,{GET:()=>u});var a=t(39187),n=t(74272),s=t(60517),i=t(41508),p=e([n]);async function u(e){try{await (0,s.ay)(e,s.Nw);let r=await (0,n.oC)(e,{enforceDomain:!0}),t=(0,i.t9)(r.role,r.is_admin);return a.NextResponse.json({success:!0,data:{id:r.id,email:r.email,role:t,google_id:r.google_id,username:r.username,is_admin:r.is_admin??(0,i.uu)(t),created_at:r.created_at,last_login:r.last_login}})}catch(e){return console.error("âŒ Profile error:",e),a.NextResponse.json({success:!1,error:e.message||"Authentication required"},{status:e.status||401})}}n=(p.then?(await p)():p)[0],o()}catch(e){o(e)}})},60517:(e,r,t)=>{t.d(r,{Nw:()=>s,ay:()=>n,uZ:()=>i});var o=t(44218);let a=new Map;async function n(e,r){let t=function(e){let r=e.headers.get("x-forwarded-for");return r?r.split(",")[0]?.trim()||"unknown":e.headers.get("x-real-ip")||e.ip||"unknown"}(e),n=`${r.keyPrefix}:${t}`,s=Date.now(),i=a.get(n);if(!i||i.expiresAt<s){a.set(n,{count:1,expiresAt:s+r.windowMs});return}if(i.count>=r.max)throw new o.qQ("Too many requests, please try again later.");i.count+=1,a.set(n,i)}let s={windowMs:9e5,max:100,keyPrefix:"general"},i={windowMs:9e5,max:200,keyPrefix:"admin"}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[680,38,883,684],()=>t(78959));module.exports=o})();